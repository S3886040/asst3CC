<!DOCTYPE html>

<%- include('../views/navbar', {userName: user.user_name}); %>

<html>
  <%- include('../views/head'); %>
  <body>
    <section class="section container">
        <form action="/post" enctype="multipart/form-data" method="POST">
          <div class="form-group" action="/post" enctype="multipart/form-data">
            <label for="exampleFormControlInput1">Subject</label>
            <input type="text" class="form-control" id="exampleFormControlInput1" name="subject" />
          </div>
          <div class="form-group">
            <label for="exampleFormControlTextarea1">Content</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="post"></textarea>
          </div>
          <div class="form-group">
            <label for="exampleFormControlFile1">Image Upload</label>
            <input type="file" accept="image/png, image/gif, image/jpeg" class="form-control-file" id="exampleFormControlFile1" name="file" />
          </div>
          <input type="submit" value="Submit" />
          <p class="error"><%= typeof error != 'undefined' ? error : '' %></p>
        </form>
    </section>
    <section class="section container">
         <p class="error"><%= typeof error != 'undefined' ? error : '' %></p>
   
                         
             <% if(typeof posts != 'undefined') { %>
                 <% posts.forEach(post => { %>
                        <div class="card">
                            <div class="card-header">
                                <p class="card-text">Subject: <%= post.subject.S %></p>
                            </div>
                            <div class="card-body">                  
                                <p class="card-text">Post: <%= post.post.S %></p>
                                  
                                <% if (post.image.BOOL) { %>
                                    <img src=<%= post.url %> alt="post image" class="messageImg img-fluid" />
                                <% } %>
                                <p class="card-text">User: <%= post.userName.S %></p>
                            </div>       
                        </div>
                 <% });%>
            <% }%>
 
    </section>
  </body>
</html>